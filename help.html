<!-- $Id$ -->
<p>This module allows you to <a href="../content/taxonomy/csv">import taxonomies, structure or simple lists of terms</a> into a vocabulary from a <a href="http://en.wikipedia.org/wiki/Comma-separated_values" title="Wikipedia definition">CSV</a> file or a copy-and-paste text.</p>
<p>If you are unsure how to create a CSV file, you might want to use <a href="http://www.openoffice.org" title="OpenOffice.org">OpenOffice Calc</a> or another spreadsheet application to export your data into a CSV file.</p>
<p>Four items need to be set in order to import your terms.</p>
<br />

<h3>1. What to import (content of the source)?</h3>
  <p>Source can be configured with the first field set. The first column always contains the term name. You can specify what you want to import and how additional columns should be imported.</p>
  <dl>
    <dt>Alone terms</dt>
    <dd>
      Terms are imported as simple terms. Additional columns are ignored. Example:<br />
      <ul>
        <li><code>Diamond</code></li>
        <li><code>Gold</code></li>
        <li><code>Wood</code></li>
      </ul>
    </dd>
    <dt>Terms (flat vocabulary)</dt>
    <dd>
      Use this option to import a lot of terms in order to create a flat vocabulary. All items in your file will be imported as terms. Example:
      <ul>
        <li><code>Clothes, Trees, Houses</code></li>
        <li><code>Paris, Drupal</code></li>
      </ul>
    </dd>
    <dt>Hierarchical or one term by line structure</dt>
    <dd>
      Use this option to create a structure of a vocabulary (tree). Your file can be written with two schemes.<br/>
      In the first scheme, you need to set all ancestors to each term. The second column will be imported as the name of a child term of the term defined by the first column. The third column will be imported as a child of the second column, and so on. Lines can have any order. Example:<br />
      <ul>
        <li><code>Animal,Mammal,Whale</code></li>
        <li><code>Animal,Mammal,Monkey</code></li>
      </ul>
      Be careful: when a child is added or updated, line should contain all its ancestors. So a third line may be:<br />
      <ul>
        <li><code>Animal,Mammal,Human</code></li>
      </ul>
      but <strong>not</strong>:
      <ul>
        <li><code>Mammal,Human</code></li>
      </ul>
      because in this second case, < <code>Mammal</code> > is imported as a first level term and not as a < <code>Animal</code> > term child as in previous line.<br />
      <br />
      In the "one term by line structure" scheme, you can import terms without duplicate all its ancestor if previous term has ancestors. It is very useful with a spreadsheet application. It allows to easy build a structure and to upload a less heavy file. So your hierarchy can be:<br />
      <code><table border="1">
        <tr><td>World</td><td></td><td></td><td></td></tr>
        <tr><td></td><td>Asia</td><td></td><td></td></tr>
        <tr><td></td><td></td><td>Japan</td><td></td></tr>
        <tr><td></td><td></td><td></td><td>Tokyo</td></tr>
        <tr><td></td><td></td><td>Korea</td><td></td></tr>
        <tr><td></td><td></td><td></td><td>Seoul</td></tr>
      </table></code>
      <br />
      So, first lines of your csv file can be:
      <ul>
        <li><code>World</code></li>
        <li><code>,Europe</code></li>
        <li><code>,,France</code></li>
        <li><code>,,,Paris</code></li>
      </ul>
      < <code>Paris</code> > will be automatically added as a child of < <code>France</code> > and so on.
      <p>Partial lines are allowed, so a fifth line can be:</p>
      <ul>
        <li><code>,,Switzerland,Bern</code></li>
      </ul>
      < <code>Switzerland</code> > will be added as a child of < <code>Europe</code> > and of course < <code>Bern</code> > as a child of < <code>Switzerland</code> >.
      <p>In same way, first to fourth lines above can be simplified to:</p>
      <ul>
        <li><code>World,Europe,France,Paris</code></li>
      </ul>
      Full lines, partial and one term lines can be mixed, but order is important two by two lines. In this example, if fourth and fifth lines are shift, < <code>Paris</code> > will become a child of < <code>Switzerland</code> >.
    </dd>
    <dt>Related terms</dt>
    <dd>
      Use this option to create links between terms, as "see also" in an encyclopedia.
      The second and next columns will be imported as related terms of the first column term. For example, a line may be:<br />
      <ul>
        <li><code>Baobab, Madagascar, Ghost</code></li>
      </ul>
      So < <code>Baobab</code> > will be related to < <code>Madagascar</code> > and < <code>Ghost</code> >. An option allow you to create subrelations, here between < <code>Madagascar</code> > and < <code>Ghost</code> > (see below).
    </dd>
    <dt>Term description</dt>
    <dd>
      The second column will be imported as the term description of the first column term. Example:<br/>
      <ul>
        <li><code>"Baobab","An African tree"</code></li>
      </ul>
    </dd>
    <dt>Term weights</dt>
    <dd>
      The second column will be imported as weight of the term defined by first column. Example:<br/>
      <ul>
        <li><code>Baobab, 3</code></li>
      </ul>
    </dd>
    <dt>Synonyms terms</dt>
    <dd>
      The second and next columns will be imported as synonyms terms of the first column term. Example:<br />
      <ul>
        <li><code>"United Kingdom","Great Britain","England"</code></li>
      </ul>
    </dd>
  </dl>
  <br />

<h3>2. Where are terms to import?</h3>
  <p>You can import your terms from a file or with a text area. Simply check your choice.</p>
  <p>If import fails by one way (mainly due to character formats or server restrictions), you can try the second way as upload process is different.</p>
  <p>Advanced setting allow you to set delimiter and format of the file (see below).</p>
  <br />

<h3>3. Where to import into (vocabulary destination)?</h3>
  <p>You can import your terms in a existing vocabulary or create a new one. You can import your terms too in a duplicate of an existing vocabulary.</p>
  <p>When you want to import a new taxonomy into an existing one, it is recommended to process in three steps in order to allow a good import.</p>
  <ul>
    <li>First, check the import file with the < <em>Autocreate a new vocabulary</em> > option. Repeat this step while there are warnings and notices.</li>
    <li>Second, check new and existing terms merge with the < <em>Duplicate an existing vocabulary</em> > option. This choice creates a duplicate of your target existing vocabulary and import your new terms into. Original nodes attachments are not duplicated.</li>
    <li>Finally, you can import your file in the true vocabulary with the < <em>Import in an existing vocabulary</em> > option. This allows you to keep old links between existing terms and nodes.</li>
  </ul>
  <p>If you only want to create a new vocabulary, the first choice is sufficient, unless when you have multiple files for one vocabulary.</p>
  <br />

<h3>4. How to import your terms?</h3>
  <p>Destination can be configured with the second field set. You can specify what will become existing terms. Four choices are possible, or less matching your source content:</p>
  <dl>
    <dt>Update terms and merge existing</dt>
    <dd>
      Update current terms when name matches with imported ones and merge existing descriptions, parents, synonyms and related terms with new ones. Duplicates are removed. This choice is recommended if you want to keep a vocabulary and if you have descriptions, parents, synonyms and related terms you don't want to lose.
    </dd>
    <dt>Update terms and replace existing</dt>
    <dd>
      Update current terms if name matches, but remove existing descriptions, parents, synonyms and related terms. Choose this option if you are want to create a clean new vocabulary without losing existing terms.
      <br />
      Be careful: if there is no description, parent, synonym or related term, i.e. the line contains only a term in the first column, this removes the existing.
    </dd>
    <dt>Ignore current terms and create new ones</dt>
    <dd>
      Let current terms as they are and create a new term for the first column term.
      <br />
      Warning: This can create duplicate terms. It is recommended to use this option only if you are sure that imported taxonomy contains only new terms or if your vocabulary allows multiple parents.
    </dd>
    <dt>Ignore all current terms and create new ones</dt>
    <dd>
      Create a new term for each term on the line.
    </dd>
  </dl>
  <br />

<h3>Advanced settings and hints</h3>
  <ul>
    <li>
      It is recommended to protect terms with quotation marks (<strong><code>"</code></strong>), specialy if they contain non-ASCII letters or if imported items, in particular descriptions, contain the chosen delimiter. Example:<br />
      <ul>
        <li><code>"term 1","This field has a comma, but it will be correctly imported."</code></li>
      </ul>
    </li>
    <li>
      Delimiters (comma "<strong><code>,</code></strong>", semicolon "<strong><code>;</code></strong>" or tabulation) between terms can be chosen in Advanced settings in the second fieldset. You can choose a custom delimiter too. Delimiters can have multiple characters. Example with delimiter < <strong><code>¤</code></strong> >:<br />
      <ul>
        <li><code>term 1¤This field has commas, a semicolon (;), a quotation mark (") and a tabulation, but it will be correctly imported.</code></li>
      </ul>
    </li>
    <li>
      It's recommended to use text area import or utf8 encoded file in order to avoid problems with non-ASCII terms.
    </li>
    <li>
      If your server doesn't support utf8 conversion, an option allows to disable it in the second fieldset.
    </li>
    <li>
      When you want to import child term names as well as descriptions, synonyms, related terms, term weights and a hierarchical structure, you should begin with the file containing the hierarchical structure. So first import child term names with the < <em>Structure</em> > option. Second, upload the other files with the adequate option and one of the <em>Update terms...</em> option.
    </li>
    <li>
      Be careful: if 1) source choice is <strong>not</strong> <em>"Ignore"</em> additional columns, 2) file or a line in the file has only one column and 3) you choose <em>"Update and replace"</em>, the import process will be a remove process of matching items (first column terms are always kept or imported).
    </li>
  </ul>
<p>Another Drupal module allows CSV import too, despite its name: <a href="http://drupal.org/project/taxonomy_xml" title="taxonomy XML">taxonomy XML</a>. Its approach is different: it uses one file complient to thesauri standard ISO 2788, i.e. a three columns csv file: <code>first term, type of link, second term</code>, or, for specialists, <code>subject, predicate, object</code>. For Drupal 4.7 and Drupal 5, <a href="http://drupal.org/project/taxonomy_batch_operations" title="taxonomy batch operations">taxonomy batch operations</a> is available too. So choose the module best matching your needs.</p>
<br />